<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Validate name: only letters and spaces
        function validateName() {
            var name = document.getElementById("name").value;
            var nameRegex = /^[A-Za-z\s]+$/;
            var nameError = document.getElementById("name-error");
            if (!nameRegex.test(name)) {
                nameError.style.display = "block";
                document.getElementById("name").classList.add("border-red-500");
                return false;
            } else {
                nameError.style.display = "none";
                document.getElementById("name").classList.remove("border-red-500");
                return true;
            }
        }

        // Validate phone: only digits
        function validatePhone() {
            var phone = document.getElementById("phone").value;
            var phoneRegex = /^[0-9]+$/;
            var phoneError = document.getElementById("phone-error");
            if (!phoneRegex.test(phone)) {
                phoneError.style.display = "block";
                document.getElementById("phone").classList.add("border-red-500");
                return false;
            } else {
                phoneError.style.display = "none";
                document.getElementById("phone").classList.remove("border-red-500");
                return true;
            }
        }

        // Validate form and enable/disable submit button
        function validateForm() {
            const nameValid = validateName();
            const phoneValid = validatePhone();
            const submitButton = document.getElementById("submit-btn");
            
            // Enable the submit button only if both fields are valid
            submitButton.disabled = !(nameValid && phoneValid);
        }

        // Run validation on input change
        document.addEventListener("DOMContentLoaded", function() {
            // Initially disable submit button
            validateForm();

            // Set up input event listeners
            document.getElementById("name").addEventListener("input", function() {
                validateName();
                validateForm();
            });

            document.getElementById("phone").addEventListener("input", function() {
                validatePhone();
                validateForm();
            });
        });
    </script>
</head>
<body class="bg-gray-50 p-8">

    <header class="bg-blue-900 text-white py-8 shadow-lg">
        <h1 class="text-4xl font-bold text-center">Create a New Challenge</h1>
    </header>

    <form action="{{ url_for('challenge.create_challenge') }}" method="POST" enctype="multipart/form-data" class="max-w-6xl mx-auto mt-8 bg-white p-8 rounded-lg shadow-lg">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Left Column (Name, Email, Phone) -->
            <div class="space-y-6">
                <div>
                    <label for="name" class="block text-gray-700">Name</label>
                    <input type="text" id="name" name="name" class="mt-2 p-3 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <p id="name-error" class="text-red-500 text-sm mt-1" style="display: none;">Invalid name. Only letters and spaces are allowed.</p>
                </div>

                <div>
                    <label for="email" class="block text-gray-700">Email</label>
                    <input type="email" id="email" name="email" class="mt-2 p-3 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>

                <div>
                    <label for="phone" class="block text-gray-700">Phone</label>
                    <input type="text" id="phone" name="phone" class="mt-2 p-3 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    <p id="phone-error" class="text-red-500 text-sm mt-1" style="display: none;">Invalid phone number. Only digits are allowed.</p>
                </div>
            </div>

            <!-- Right Column (Description, Upload Media, Submit) -->
            <div class="space-y-6">
                <div>
                    <label for="description" class="block text-gray-700">Description</label>
                    <textarea id="description" name="description" class="mt-2 p-3 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
                </div>

                <div>
                    <label for="media" class="block text-gray-700">Upload Media (Optional)</label>
                    <input type="file" id="media" name="media" class="mt-2 p-3 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <div>
                    <button type="submit" class="w-full py-3 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition" id="submit-btn" disabled>Submit</button>
                </div>
            </div>
        </div>
    </form>

</body>
</html>
